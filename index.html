
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3c.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3c.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Odra</title>

        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

        <meta name="description" content="An everlasting underwater music experiment. A different look at generative sounds." />
        <meta name="author" content="marpi" />

        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <meta charset="utf-8">

        <link href="./css/style.css" rel="stylesheet" type="text/css">
        <link href="./css/styles.css" rel="stylesheet" type="text/css">
        <link href="./css/font-awesome.min.css" rel="stylesheet" type="text/css">
    </head>	

    <body>

        <script src="https://demo.marpi.pl/_/scripts/demo-ui.js"></script>
        <script type="text/javascript">
            MarpiDemoUI.init("odra");
        </script>

        <div class="intro" id="intro">
            <div class="intro__center" id="intro__center" style="opacity:0;">
                <p>Welcome to</p>
                <h2>Odra</h2>
                <h3>click here</h3>
            </div>
            <div class="intro__bottom" id="intro__bottom" style="opacity:0;">
                <svg width="41px" height="44px" viewBox="0 0 41 44" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <path d="M18.7420197,0 L20.46046,0 C30.967873,0 39.1991687,7.99160626 39.1991687,18.1931055 L39.1991687,37.5686522 C39.1991687,40.7937487 36.5640378,43.4182027 33.3248749,43.4182027 C30.086185,43.4182027 27.4520001,40.7937487 27.4520001,37.5686522 L27.4520001,28.8525063 C27.4520001,25.6274099 30.086185,23.0034269 33.3248749,23.0034269 C34.6407848,23.0034269 35.8531058,23.4415425 36.8336527,24.1726775 L36.8336527,18.1931055 C36.8336527,9.31254849 29.6415569,2.35546046 20.46046,2.35546046 L18.7420197,2.35546046 C9.55855778,2.35546046 2.365043,9.3120774 2.365043,18.1931055 L2.365043,24.1722064 C3.34511682,23.4420136 4.55743786,23.0034269 5.87287477,23.0034269 C9.11203766,23.0034269 11.7466956,25.6274099 11.7466956,28.8525063 L11.7466956,37.5686522 C11.7466956,40.7937487 9.11203766,43.4182027 5.87287477,43.4182027 C2.63418489,43.4182027 0,40.7937487 0,37.5686522 L0,18.1931055 C0,7.99160626 8.23271468,0 18.7420197,0 Z M29.8175161,37.5686522 C29.8175161,39.4949478 31.3916887,41.0622712 33.3253479,41.0622712 C35.259953,41.0622712 36.8341257,39.4949478 36.8341257,37.5686522 L36.8341257,28.8525063 C36.8341257,26.9262108 35.259953,25.3588874 33.3253479,25.3588874 C31.3916887,25.3588874 29.8175161,26.9262108 29.8175161,28.8525063 L29.8175161,37.5686522 Z M2.365043,37.5686522 C2.365043,39.4949478 3.93874261,41.0622712 5.87287477,41.0622712 C7.80700694,41.0622712 9.38165256,39.4949478 9.38165256,37.5686522 L9.38165256,28.8525063 C9.38165256,26.9262108 7.80700694,25.3588874 5.87287477,25.3588874 C3.93921562,25.3588874 2.365043,26.9262108 2.365043,28.8525063 L2.365043,37.5686522 Z" id="path-1"></path>
                <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                <g id="Splash" transform="translate(-726.000000, -673.000000)">
                <g id="Page-1" transform="translate(726.898539, 673.541992)">
                <mask id="mask-2" fill="white">
                    <use xlink:href="#path-1"></use>
                </mask>
                <use id="Clip-2" fill="#FFFFFF" xlink:href="#path-1"></use>
                </g>
                </g>
                </g>
                </svg>
                <p>Turn up the volume</p>
            </div>
        </div>

        <div class="panel" style="opacity:0;" id="panel">
            
        <div class="list">
            <p><span>
	            <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="9px" height="15px" viewBox="0 0 9 15" enable-background="new 0 0 9 15" xml:space="preserve">
	    			<polygon fill="#FFFFFF" points="7.4,5.9 1.5,0 0.1,1.4 6,7.3 0.1,13.2 1.5,14.5 8.8,7.3 " />
				</svg>
			</span><span>Most liked</span></p>
            <ul id="buttons" style="height: 370px; opacity: 1;">
                <li><a id="agrianki" class="track" style="top: 50px;">Agrianki <span style="opacity:.5">40</span></a></li>
                <li><a id="jiw" class="track" style="top: 70px;">Jiw <span style="opacity:.5">39</span></a></li>
                <li><a id="banka" class="track" style="top: 90px;">Banka <span style="opacity:.5">17</span></a></li>
                <li><a id="xessou" class="track" style="top: 110px;">Xessou <span style="opacity:.5">12</span></a></li>
                <li><a id="aidack" class="track" style="top: 130px;">Aidack <span style="opacity:.5">9</span></a></li>
                <li><a id="chearkoa" class="track" style="top: 150px;">Chearkoa <span style="opacity:.5">8</span></a></li>
                <li><a id="ugryf" class="track" style="top: 170px;">Ugryf <span style="opacity:.5">8</span></a></li>
                <li><a id="krih" class="track" style="top: 190px;">Krih <span style="opacity:.5">7</span></a></li>
                <li><a id="wagliuk" class="track" style="top: 210px;">Wagliuk <span style="opacity:.5">6</span></a></li>
                <li><a id="usliigo" class="track" style="top: 230px;">Usliigo <span style="opacity:.5">5</span></a></li>
            </ul>
        </div><div class="panel__center"><div id="name" class="name">Wagliuk</div><div class="vote">
                <a id="vote"><i id="stateicon">


					<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="33px" height="29px" viewBox="0 0 33 29" enable-background="new 0 0 33 29" xml:space="preserve">
					    <g>
					        <path id="path-1" fill="#FFFFFF" d="M2.6,2.6C4.3,0.9,6.6,0,8.9,0s4.6,0.9,6.3,2.6l1.2,1.2l1.2-1.2c3.5-3.5,9.2-3.5,12.7,0
							s3.5,9.1,0,12.6c-4.2,4.3-8.5,8.6-12.7,12.9c-0.3,0.3-0.7,0.5-1.2,0.5c-0.4,0-0.9-0.2-1.2-0.5L2.6,15.3C-0.9,11.8-0.9,6.1,2.6,2.6z
							 M4.9,13.2L16.5,25c3.9-3.9,7.7-7.8,11.6-11.7c2.3-2.3,2.3-6.1,0-8.4s-5.8-2.3-8.1,0l-2.3,2.4c-0.3,0.3-0.7,0.5-1.2,0.5
							c-0.4,0-0.9-0.2-1.2-0.5L13,4.7C11.8,3.6,10.4,3,8.9,3C7.5,3,6,3.6,4.9,4.7C2.6,7.1,2.6,10.8,4.9,13.2z" />
					    </g>
					    <g id="Symbols">
					        <g id="Like" transform="translate(0.000000, -1.000000)">
					            <g id="Clip-2">
					                <path id="path-1_1_" fill="#FFFFFF" d="M2.6,3.6C4.3,1.9,6.6,1,8.9,1s4.6,0.9,6.3,2.6l1.2,1.2l1.2-1.2c3.5-3.5,9.2-3.5,12.7,0
									s3.5,9.1,0,12.6c-4.2,4.3-8.5,8.6-12.7,12.9c-0.3,0.3-0.7,0.5-1.2,0.5c-0.4,0-0.9-0.2-1.2-0.5L2.6,16.3
									C-0.9,12.8-0.9,7.1,2.6,3.6z M4.9,14.2L16.5,26c3.9-3.9,7.7-7.8,11.6-11.7c2.3-2.3,2.3-6.1,0-8.4s-5.8-2.3-8.1,0l-2.3,2.4
									c-0.3,0.3-0.7,0.5-1.2,0.5c-0.4,0-0.9-0.2-1.2-0.5L13,5.7C11.8,4.6,10.4,4,8.9,4C7.5,4,6,4.6,4.9,5.7C2.6,8.1,2.6,11.8,4.9,14.2z
									" />
					            </g>
					        </g>
					    </g>
					</svg>

                	<svg version="1.1"  class="like__full" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="33px" height="29px" viewBox="0 0 33 29" enable-background="new 0 0 33 29" xml:space="preserve">
					    <path fill="#FFFFFF" d="M30.3,2.8c-3.5-3.5-9.2-3.5-12.7,0L16.5,4l-1.2-1.2c-1.7-1.7-4-2.6-6.3-2.6c-2.3,0-4.6,0.9-6.3,2.6
						c-3.5,3.5-3.5,9.2,0,12.7l12.6,12.8c0.3,0.3,0.8,0.5,1.2,0.5c0.5,0,0.9-0.2,1.2-0.5c4.2-4.3,8.5-8.6,12.7-12.9
						C33.8,11.9,33.8,6.3,30.3,2.8z" />
					</svg>

                </i></a>
                <div class="votes" id="votes"></div>
            </div>
        </div><!--
        --><a class="generate show-tablet-desktop" id="generate"><i id="stateicon"></i>
			<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="22px" height="15px" viewBox="0 0 22 15" enable-background="new 0 0 22 15" xml:space="preserve">
			    <polygon fill="#FFFFFF" points="7.4,5.9 1.5,0 0.1,1.4 6,7.3 0.1,13.2 1.5,14.5 8.8,7.3 " />
			    <polygon fill="#FFFFFF" points="20.4,5.9 20.4,5.9 14.5,0 13.1,1.4 19,7.3 13.1,13.2 14.5,14.5 20.4,8.6 21.8,7.3 " />
			</svg>

        </a>
        </div>
        
        <a class="generate2 show-phone" id="generate2" style="opacity:0;display:none;"><i id="stateicon"></i>
			<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="22px" height="15px" viewBox="0 0 22 15" enable-background="new 0 0 22 15" xml:space="preserve">
			    <polygon fill="#FFFFFF" points="7.4,5.9 1.5,0 0.1,1.4 6,7.3 0.1,13.2 1.5,14.5 8.8,7.3 " />
			    <polygon fill="#FFFFFF" points="20.4,5.9 20.4,5.9 14.5,0 13.1,1.4 19,7.3 13.1,13.2 14.5,14.5 20.4,8.6 21.8,7.3 " />
			</svg>

        </a>

        <div id="preloader">
            <div id="preloader_background">
                <div id="progress"></div>
            </div>
        </div>

        <!--<a href="#" style="position:absolute;left:10px;bottom:10px;z-index:100000000;" class="btn btn-default" data-toggle="tooltip" title="Music" onclick="aud_play_pause()"><i id="stateicon" class="fa fa-volume-up"></i></a>-->
        <a href="#" id="b1" style="position:absolute;right:10px;bottom:10px;z-index:100000000;" class="btn btn-default" data-toggle="tooltip" title="Fullscreen" onclick="fullscreen(event)"><i id="stateicon" class="fa fa-arrows-alt"></i></a>
        <a href="https://marpi.pl/work/odra/" id="b2" style="position:absolute;right:30px;bottom:10px;z-index:100000000;" class="btn btn-default" data-toggle="tooltip" title="Info"><i id="stateicon" class="fa fa-info"></i></a>

        <!-- shaders from https://github.com/spite -->
        <script type="x-shader/x-vertex" id="ortho-vs" >
            precision highp float;

            attribute vec3 position;
            attribute vec2 uv;

            uniform mat4 modelViewMatrix;
            uniform mat4 projectionMatrix;

            varying vec2 vUv;

            void main() {

            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1. );

            }
        </script>

        <script type="x-shader/x-fragment" id="tilt-shift-fs" >
            precision highp float;

            uniform sampler2D inputTexture;
            uniform vec2 resolution;
            uniform float blur;

            varying vec2 vUv;

            float smootherstep(float edge0, float edge1, float x) {

            x = clamp((x - edge0)/(edge1 - edge0), 0.0, 1.0);
            return x*x*x*(x*(x*6. - 15.) + 10.);

            }

            void main(){

            vec4 sum = vec4( 0. );
            float d = abs( .5 - vUv.y );
            vec2 inc = vec2( 0., .005 * smootherstep( 0., .75, d ) * blur );

            sum += texture2D( inputTexture, ( vUv - inc * 4. ) ) * 0.051;
            sum += texture2D( inputTexture, ( vUv - inc * 3. ) ) * 0.0918;
            sum += texture2D( inputTexture, ( vUv - inc * 2. ) ) * 0.12245;
            sum += texture2D( inputTexture, ( vUv - inc * 1. ) ) * 0.1531;
            sum += texture2D( inputTexture, ( vUv + inc * 0. ) ) * 0.1633;
            sum += texture2D( inputTexture, ( vUv + inc * 1. ) ) * 0.1531;
            sum += texture2D( inputTexture, ( vUv + inc * 2. ) ) * 0.12245;
            sum += texture2D( inputTexture, ( vUv + inc * 3. ) ) * 0.0918;
            sum += texture2D( inputTexture, ( vUv + inc * 4. ) ) * 0.051;

            gl_FragColor = sum;

            }
        </script>

        <script type="x-shader/x-fragment" id="shift-fs" >
            precision highp float;

            uniform sampler2D inputTexture;
            uniform float pixelRatio;
            uniform vec2 resolution;

            varying vec2 vUv;

            void main(){

            vec2 inc = vec2( 6., 0. ) / resolution * pixelRatio;
            inc.x*=abs(vUv.x - 0.5);

            float r = texture2D( inputTexture, vUv - inc.xy ).r;
            float g = texture2D( inputTexture, vUv ).g;
            float b = texture2D( inputTexture, vUv + inc.xy ).b;

            vec3 color = vec3( r, g, b );

            gl_FragColor = vec4( color, 1. );

            }

        </script>

        <script type="x-shader/x-fragment" id="final-fs" >
            precision highp float;

            uniform sampler2D inputTexture;
            uniform vec2 resolution;

            uniform float boost;
            uniform float pixelRatio;
            uniform float reduction;

            uniform float amount;
            uniform float time;

            varying vec2 vUv;

            #define FXAA_REDUCE_MIN   (1.0/128.0)
            #define FXAA_REDUCE_MUL   (1.0/8.0)
            #define FXAA_SPAN_MAX     8.0

            float random(vec2 n, float offset ){
            return .5 - fract(sin(dot(n.xy + vec2( offset, 0. ), vec2(12.9898, 78.233)))* 43758.5453);
            }

            void main() {

            vec2 res = 1. / resolution;

            vec3 rgbNW = texture2D( inputTexture, ( vUv.xy + vec2( -1.0, -1.0 ) * res ) ).xyz;
            vec3 rgbNE = texture2D( inputTexture, ( vUv.xy + vec2( 1.0, -1.0 ) * res ) ).xyz;
            vec3 rgbSW = texture2D( inputTexture, ( vUv.xy + vec2( -1.0, 1.0 ) * res ) ).xyz;
            vec3 rgbSE = texture2D( inputTexture, ( vUv.xy + vec2( 1.0, 1.0 ) * res ) ).xyz;
            vec4 rgbaM  = texture2D( inputTexture,  vUv.xy  * res );
            vec3 rgbM  = rgbaM.xyz;
            vec3 luma = vec3( 0.299, 0.587, 0.114 );

            float lumaNW = dot( rgbNW, luma );
            float lumaNE = dot( rgbNE, luma );
            float lumaSW = dot( rgbSW, luma );
            float lumaSE = dot( rgbSE, luma );
            float lumaM  = dot( rgbM,  luma );
            float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );
            float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );

            vec2 dir;
            dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
            dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

            float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );

            float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );
            dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),
            max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
            dir * rcpDirMin)) * res;
            vec4 rgbA = (1.0/2.0) * (
            texture2D(inputTexture,  vUv.xy + dir * (1.0/3.0 - 0.5)) +
            texture2D(inputTexture,  vUv.xy + dir * (2.0/3.0 - 0.5)));
            vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (
            texture2D(inputTexture,  vUv.xy + dir * (0.0/3.0 - 0.5)) +
            texture2D(inputTexture,  vUv.xy + dir * (3.0/3.0 - 0.5)));
            float lumaB = dot(rgbB, vec4(luma, 0.0));

            vec4 color;
            if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {
            color = rgbA;
            } else {
            color = rgbB;
            }

            vec2 position = ( gl_FragCoord.xy / resolution ) - ( 0.5 / pixelRatio );
            float vignette = length( position );

            color.rgb *= boost - vignette * reduction * pixelRatio;

            color += vec4( vec3( amount * random( vUv, time ) ), 1. );

            float gamma = 1.2;
            color.rgb = pow(color.rgb, vec3(1.0/gamma));

            gl_FragColor = color;

            }

        </script>

        <script>
            var deeplinkName = "";

            var preloaderProgressValue = 0.2 + 0.3 * Math.random();
            var preloaderProgressAnimValue = 0;
            function preloaderProgress(perc) {
                if (perc > preloaderProgressValue)
                    preloaderProgressValue = perc;
            }
            function draw() {
                if (preloaderProgressValue > .9) {
                    preloaderProgressAnimValue -= (preloaderProgressAnimValue - preloaderProgressValue) / 5;
                } else {
                    preloaderProgressAnimValue -= (preloaderProgressAnimValue - preloaderProgressValue) / 55;
                }
                document.getElementById("progress").style.width = 100 * preloaderProgressAnimValue + "px";
                
                if (preloaderProgressAnimValue < .98) {
                    requestAnimationFrame(draw);
                } else {
                    document.getElementsByTagName("canvas")[0].style.display = "block";
                    document.getElementById("preloader").style.display = "none";
                }
            }
            draw();

            function fullscreen(e) {
                e.preventDefault()
                if ((document.fullScreenElement && document.fullScreenElement !== null) ||
                        (!document.mozFullScreen && !document.webkitIsFullScreen)) {
                    if (document.documentElement.requestFullScreen) {
                        document.documentElement.requestFullScreen();
                    } else if (document.documentElement.mozRequestFullScreen) {
                        document.documentElement.mozRequestFullScreen();
                    } else if (document.documentElement.webkitRequestFullScreen) {
                        document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);
                    }
                } else {
                    if (document.cancelFullScreen) {
                        document.cancelFullScreen();
                    } else if (document.mozCancelFullScreen) {
                        document.mozCancelFullScreen();
                    } else if (document.webkitCancelFullScreen) {
                        document.webkitCancelFullScreen();
                    }
                }
            }
        </script>

        <script src="./js/lib/StartAudioContext.js"></script>
        <script src="./js/lib/promise.min.js"></script>
        <script src="./js/lib/minivents.min.js"></script>
        <script src="./js/lib/Detector.js"></script>
        <script src="./js/lib/three.js"></script>
        <script src="./js/lib/stats.min.js"></script>
        <script src="./js/lib/dat.gui.min.js"></script>
        <script src="./js/lib/TweenMax.min.js"></script>
        <script src="./js/lib/perlin.js"></script>
        <script src="./js/lib/js.cookie.js"></script>
        <script src="./js/lib/controls/OrbitControls.js"></script>
        <script src="./js/lib/isMobile.min.js"></script>
        <script src="./js/lib/seedrandom.js"></script>
        <script src="./js/lib/totro.js"></script>
        <script src="./js/lib/Tone.js"></script>

        <script src="./js/viz/Generator.js"></script>
        <script src="./js/viz/Tools.js"></script>
        <script src="./js/viz/Shards.js"></script>
        <script src="./js/viz/Forest.js"></script>
        <script src="./js/viz/Objects.js"></script>
        <script src="./js/viz/Monster.js"></script>
        <script src="./js/viz/MonsterObject.js"></script>
        <script src="./js/viz/Mecha.js"></script>
        <script src="./js/viz/Assets.js"></script>

        <script src="./js/viz/SequencerVisual.js"></script>
        <script src="./js/viz/Sequencer.js"></script>

        <script src="./js/Main.js"></script>
        <script src="./js/AudioHandler.js"></script>
        <script src="./js/FXHandler.js"></script>
        <script src="./js/VizHandler.js"></script>
        <script src="./js/UI.js"></script>
        
        <script src="./js/lib/jquery-3.2.1.min.js"></script>
        <script src="./js/lib/scripts.js"></script>

    </body>
</html>